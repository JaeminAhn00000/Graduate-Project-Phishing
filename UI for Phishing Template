import tkinter as tk
from tkinter import messagebox
import subprocess
import os

# --- Functions ---
def create_user():
    username = entry_username.get().strip()
    if not username:
        messagebox.showerror("Error", "Username cannot be empty.")
        return
    
    # Example system command to create a new user (Linux)
    try:
        subprocess.run(["sudo", "adduser", username], check=True)
        messagebox.showinfo("Success", f"User '{username}' created successfully.")
    except subprocess.CalledProcessError:
        messagebox.showerror("Error", f"Failed to create user '{username}'.")

def run_scraper():
    # Path to your Telegram scraper script
    scraper_script = "/path/to/telegram_scraper.py"
    
    if not os.path.exists(scraper_script):
        messagebox.showerror("Error", f"Script not found: {scraper_script}")
        return
    
    try:
        subprocess.run(["python3", scraper_script], check=True)
        messagebox.showinfo("Success", "Scraper executed successfully.")
    except subprocess.CalledProcessError:
        messagebox.showerror("Error", "Scraper execution failed.")

def quit_app():
    root.destroy()

# --- UI Setup ---
root = tk.Tk()
root.title("Phishing Project Control Panel")
root.geometry("400x250")

# Username Creation
tk.Label(root, text="Create New User", font=("Arial", 12, "bold")).pack(pady=5)
frame_user = tk.Frame(root)
frame_user.pack(pady=5)
tk.Label(frame_user, text="Username:").grid(row=0, column=0, padx=5)
entry_username = tk.Entry(frame_user)
entry_username.grid(row=0, column=1, padx=5)
tk.Button(frame_user, text="Create", command=create_user).grid(row=0, column=2, padx=5)

# Script Execution
tk.Label(root, text="Run Phishing/OSINT Scripts", font=("Arial", 12, "bold")).pack(pady=10)
tk.Button(root, text="Run Telegram Scraper", command=run_scraper, width=25).pack(pady=5)

# Quit
tk.Button(root, text="Exit", command=quit_app, bg="red", fg="white").pack(pady=20)

root.mainloop()
